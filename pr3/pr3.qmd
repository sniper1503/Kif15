---
title: "Основы обработки данных с помощью R и Dplyr"
subtitle: "Отчёт по практике 3"
author: "sniper12.04@yandex.ru"
format:
  md:
    output-file: README.md
---

## Цель работы

1.  Развить практические навыки использования языка программирования R для обработки данных
2.  Закрепить знания базовых типов данных языка R
3.  Развить практические навыки использования функций обработки данных пакета dplyr – функции select(), filter(), mutate(), arrange(), group_by()

## Исходные данные

1.  Программное обеспечение ОС Windows 10 Pro
2.  RStudio
3.  Интерпретатор языка R 4.5.1

## План

1. Установка и подключение пакета nycflights13  
2. Определение количества встроенных датафреймов  
3. Подсчёт количества строк в каждом датафрейме  
4. Подсчёт количества столбцов в каждом датафрейме  
5. Просмотр структуры датафрейма  
6. Подсчёт количества уникальных компаний-перевозчиков  
7. Подсчёт рейсов, принятых аэропортом John F Kennedy Intl в мае  
8. Определение самого северного аэропорта
9. Определение самого высокогорного аэропорта  
10. Поиск бортовых номеров самых старых самолётов  
11. Расчёт средней температуры в сентябре в аэропорту JFK (в °C)  
12. Самолеты какой авиакомпании совершили больше всего вылетов в июне?
13. Самолеты какой авиакомпании задерживались чаще других в 2013 году?
---

\## Установка и подключение пакета nycflights13

```{r}
options(repos = c(CRAN = "https://mirror.truenetwork.ru/CRAN/"))
install.packages("nycflights13")

```

```{r}
install.packages("dplyr")
```

```{r}
library(nycflights13)
library(dplyr)
```

\## Определение количества встроенных датафреймов

```{r}
data_list <- data(package = "nycflights13")$results[, "Item"]
length(data_list)

```

\## Подсчёт количества строк в каждом датафрейме

```{r}
sapply(data_list, function(x) nrow(get(x, envir = asNamespace("nycflights13"))))

```

\## Подсчёт количества столбцов в каждом датафрейме

```{r}
sapply(data_list, function(x) ncol(get(x, envir = asNamespace("nycflights13"))))
```

\## Просмотр структуры датафрейма

```{r}
head(airlines)
```

\## Подсчёт количества уникальных компаний-перевозчиков

```{r}
length(unique(airlines$carrier))

```

\## Подсчёт рейсов, принятых аэропортом John F Kennedy Intl в мае

```{r}
flights %>%
  filter(dest == "JFK", month == 5) %>%
  nrow()
```

\## Определение самого северного аэропорта

```{r}
airports %>%
  filter(alt == max(alt, na.rm = TRUE))
```

\## Определение самого высокогорного аэропорта

```{r}
airports %>%
  filter(lat == max(lat, na.rm = TRUE))
```

\## Поиск бортовых номеров самых старых самолётов

```{r}
planes %>%
filter(!is.na(year)) %>%
arrange(year) %>%
head(10) %>%
select(year, tailnum)
```

\## Расчёт средней температуры в сентябре в аэропорту JFK (в °C)

```{r}
weather %>%
  filter(origin == "JFK", month == 9) %>%
  summarise(mean_temp_C = mean((temp - 32) * 5/9, na.rm = TRUE))
```

\## Самолеты какой авиакомпании совершили больше всего вылетов в июне?

```{r}
flights %>%
  filter(month == 6) %>%
  count(carrier, sort = TRUE) %>%
  slice_max(n, n = 1) %>%
  left_join(airlines, by = "carrier") %>%
  pull(name)
```

\## Самолеты какой авиакомпании задерживались чаще других в 2013 году?

```{r}
flights %>%
  filter(dep_delay > 0) %>%
  count(carrier, sort = TRUE) %>%
  left_join(airlines, by = "carrier")
```

## Оценка результатов

В данной практической работе мы применили знания, полученные ранее, для анализа набора данных nycflights13. Были выполнены запросы по структуре, фильтрации, агрегации и объединению таблиц.

## Вывод

Таким образом, мы закрепили навыки работы с функциями пакета dplyr: select(), filter(), mutate(), arrange(), group_by(), summarise() и join(), применяя их к реальным данным авиаперевозок Нью-Йорка за 2013 год.

### 
